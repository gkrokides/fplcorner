{% extends 'fplcornerapp/base.html' %}

{% block head %}
	<script src="https://cdn.jsdelivr.net/npm/chart.js@2.8.0"></script>		
{% endblock %}

{% block content %}
    <form method="POST" class="">{% csrf_token %}
    <div class="card card-body">
        <div class="row justify-content-center">
            <div class="col-10">
                <div class="d-flex justify-content-center mb-3">
                    <div class="p-2">
                        <select class="selectpicker border border-success" data-live-search="true" data-width="auto" name="topn" id="topn" onChange="">
                          <option value="5">Top 5</option>
                          <option value="10">Top 10</option>
                          <option value="15">Top 15</option>
                          <option value="20">Top 20</option>
                        </select>
                    </div>
                    <div class="p-2">
                        <select class="selectpicker border border-success" data-live-search="true" data-width="auto" name="pos" id="pos" onChange="">
                          <option value="GKP">Goalkeepers</option>
                          <option value="DEF">Defenders</option>
                          <option value="MID">Midfielders</option>
                          <option value="FWD">Forwards</option>
                        </select>
                    </div>
                </div>    
            </div>
        </div>
        <div class="row justify-content-center">
            <div class="col-10">
                <div class="d-flex justify-content-center mb-3">
                    <div class="p-2">
                        <select class="selectpicker border border-success" data-live-search="true" data-width="auto" name="metric1" id="m_one" onChange="">
                          {# <option value="All" disabled selected>Player 1</option> #}
                          {% for key, value in available_metrics.items %}
                            <option value="{{ key }}">{{ value }}</option>
                          {% endfor %}{% csrf_token %}
                        </select>
                    </div>
                    <div class="p-3">
                        vs.
                    </div>
                    <div class="p-2">
                        <select class="selectpicker border border-success" data-live-search="true" data-width="auto" name="metric2" id="m_two" onChange="">
                          {# <option value="All2" disabled selected>Player 2</option> #}
                          {% for key, value in available_metrics.items %}
                            <option value="{{ key }}">{{ value }} </option>
                          {% endfor %}{% csrf_token %}
                        </select>
                    </div>
                </div>    
            </div>
        </div>
        <div class="row justify-content-center">
            <button type="submit" class="btn btn-warning">Discover</button>
        </div>
    </div>
        
    </form>
    

    <div class="row">
        {{ topn }} <br>
        {{ position }} <br>
        {{ metric1 }} <br>
        {{ metric2 }} <br>
        {{ selected_metrics }}
    </div>

    <div class="row justify-content-center">
        <div class="col-10">
            <canvas id="myChart"></canvas>
        </div>
        
    </div>
	

	<script type="text/javascript">
        var ctx = document.getElementById("myChart").getContext('2d');

        // Define the data 
        var data = [{
                        x: 5,
                        y: 4
                    }, {
                        x: 2,
                        y: 14
                    },
                    {
                        x: 4,
                        y: 12
                    },
                    {
                        x: 2,
                        y: 10
                    },
                    {
                        x: 3,
                        y: 4
                    },
                    {
                        x: 3,
                        y: 5
                    },
                    {
                        x: 3,
                        y: 8
                    },
                    {
                        x: 6,
                        y: 12
             
                 }]; // Add data values to array
        // End Defining data
        var options = {responsive: true, // Instruct chart js to respond nicely.
            maintainAspectRatio: false, // Add to prevent default behaviour of full-width/height 
        };

        // End Defining data
        var myChart = new Chart(ctx, {
            type: 'scatter',
            data: {
                datasets: [{
                        label: 'Population', // Name the series
                        data: data, // Specify the data values array
                  borderColor: '#2196f3', // Add custom color border            
                  backgroundColor: '#2196f3', // Add custom color background (Points and Fill)
                    }]
            },
            options: options
        });
	</script>

{% endblock %}